{% extends 'base.html' %}
{% block title %}Gestion des Types d'Échantillon - ANARPAM-LAB{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-4">
        <h2 class="mb-4">Ajouter un Type</h2>
        <div class="card shadow-sm"><div class="card-body">
            <form action="{{ url_for('manage_sample_types') }}" method="post">
                <div class="mb-3"><label for="type_name" class="form-label">Nom du Type</label><input type="text" class="form-control" id="type_name" name="type_name" required></div>
                <div class="d-grid"><button type="submit" class="btn btn-primary">Enregistrer</button></div>
            </form>
        </div></div>
    </div>
    <div class="col-md-8">
        <h2 class="mb-4">Types d'Échantillons Existants</h2>
        {% with messages = get_flashed_messages(with_categories=true) %}{% if messages %}{% for c, m in messages %}<div class="alert alert-{{c}}">{{m}}</div>{% endfor %}{% endif %}{% endwith %}
        <table class="table table-striped table-hover">
            <thead class="table-dark"><tr><th>Nom du Type</th><th style="width: 25%;">Actions</th></tr></thead>
            <tbody id="sample-type-table-body">
                {% for type in sample_types %}
                    {% include '_sample_type_table_row.html' %}
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div class="modal fade" id="editSampleTypeModal" tabindex="-1">
    <div class="modal-dialog"><div class="modal-content">
        <div class="modal-header"><h5 class="modal-title">Modifier le Type</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
        <div class="modal-body" id="modal-body-sample-type"></div>
    </div></div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.body.addEventListener('closeSampleTypeModal', function() {
        var modal = bootstrap.Modal.getInstance(document.getElementById('editSampleTypeModal'));
        modal.hide();
    });
</script>
{% endblock %}